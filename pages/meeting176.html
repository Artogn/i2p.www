<h3>I2P dev meeting, April 18, 2005</h3>
<div class="irclog">
<p>16:09 &lt; jrandom&gt; 0) hi</p>
<p>16:09 &lt; jrandom&gt; 1) Net status and 0.6.1.16</p>
<p>16:09 &lt; jrandom&gt; 2) Tunnel creation and congestion</p>
<p>16:10 &lt; jrandom&gt; 3) Feedspace</p>
<p>16:10 &lt; jrandom&gt; 4) ???</p>
<p>16:10 &lt; jrandom&gt; 0) hi</p>
<p>16:10  * jrandom waves</p>
<p>16:10 &lt; jrandom&gt; weekly status notes posted up at http://dev.i2p.net/pipermail/i2p/2006-April/001281.html</p>
<p>16:10  * frosk too</p>
<p>16:10 &lt; jrandom&gt; (almost two hours *before* the meeting, too :)</p>
<p>16:11 &lt; jrandom&gt; ok, since i'm sure y'all've already poured over the notes, lets jump into 1) Net status</p>
<p>16:12 &lt;+Complication&gt; Hi :)</p>
<p>16:12  * Complication quickly grabs the notes</p>
<p>16:12 &lt; jrandom&gt; the 0.6.1.16 release fixed a very long standing but in our prng, which had caused a substantial number of arbitrary tunnel rejections</p>
<p>16:13 &lt; jrandom&gt; (the root cause was injected last october, but is fixed now)</p>
<p>16:13 &lt;+Complication&gt; Status over here: works tolerably with 1 + 0..1 hop tunnels, won't behave with 2 + 0..1 or 2 +/- 0..1</p>
<p>16:14 &lt; jrandom&gt; aye, thats understandable too, especially under slower links</p>
<p>16:14 &lt; jrandom&gt; (unfortunately, "slower" isn't all that slow, either)</p>
<p>16:15 &lt; jrandom&gt; there is still much work to do, and 0.6.1.16 isn't where we need to be, but its progress</p>
<p>16:17 &lt;+Complication&gt; Something I've been thinking of,  with regard to what you called "congestion collapse"</p>
<p>16:18 &lt;+Complication&gt; One way to limit its impact might be to actually *require* a router to accept a certain quota of participation requests</p>
<p>16:19 &lt;+Complication&gt; (something specified by the user either directly or indirectly?)</p>
<p>16:19 &lt; jrandom&gt; specified by which user?</p>
<p>16:19 &lt;+Complication&gt; (e.g. some part of share percentage or an additional parameter)</p>
<p>16:19 &lt; jrandom&gt; the local user, or by us as remote users?</p>
<p>16:19 &lt;+Complication&gt; Specified by everyone for themselves</p>
<p>16:19 &lt;@frosk&gt; should we move over to 2) then? :)</p>
<p>16:20 &lt; jrandom&gt; aye, might as well consider us on 2) :)</p>
<p>16:20 &lt;+Complication&gt; So that I could, for example, tell my router "even if you're congested, keep routing a minimum of 4 KB/s"</p>
<p>16:21 &lt; jrandom&gt; Complication: thats not really possible - if a router is too congested, other people will (hopefully ;) stop asking them to participate in tunnels.</p>
<p>16:21 &lt;+Complication&gt; (this would, of course, mean that some local destination could be offline a while longer)</p>
<p>16:21 &lt; jrandom&gt; and if they aren't asked, they /cant/ push other people's data</p>
<p>16:22 &lt;+Complication&gt; Ah, perhaps I should have phrased it significantly clearer</p>
<p>16:24 &lt;+Complication&gt; I imagined it could, under a certain quota of participating traffic, throttle its own tunnel creation messages instead of participating tunnels</p>
<p>16:24 &lt;+Complication&gt; e.g. "I'll never throttle my participating tunnels to less than 4 KB/s. If that would be needed, I'll instead throttle my own traffic."</p>
<p>16:26 &lt; jrandom&gt; hmm, there are anonymity risks in that (though still along the same lines of selective DoS, which we don't defend against anyway)</p>
<p>16:27 &lt; jrandom&gt; but throttling our own local tunnel builds in face of congestion is something i've got in testing now - adding support tooptionally ignore the 4KBps floor should be simple enough</p>
<p>16:28 &lt; spinky&gt; Currently, you get no cover traffic at all when transferring lots of data.</p>
<p>16:29 &lt; spinky&gt; Having a floor for participation bw sounds good.</p>
<p>16:30 &lt; jrandom&gt; well, we do have a floor (both as the share percentage and an internal 4KBps reserved after all bw is assigned)</p>
<p>16:30 &lt;+Complication&gt; Bah, disconnects... I hope much wasn't lost of what I said, but any replies I'll have to read from the log :)</p>
<p>16:32 &lt;@frosk&gt; is there anything significant about 4KBps?</p>
<p>16:33 &lt; jrandom&gt; a few things - 4KB ~= sizeof(tunnel create message), and heuristically, i've never heard of a router running uccessfully on less</p>
<p>16:33 &lt; spinky&gt; Maybe it's the bugs that keep the share percentage from working then?</p>
<p>16:34 &lt; jrandom&gt; what makes you say the share percentage doesn't work?</p>
<p>16:34 &lt;@frosk&gt; i see</p>
<p>16:34 &lt;+Complication&gt; frosk: nah, it's just a number in the current code, and I referred to it while trying to explain what I imagined too</p>
<p>16:35 &lt;+Complication&gt; (not because of meaningful reasons, just because what I imagined was, in a certain sense, its equal opposite)</p>
<p>16:35 &lt; spinky&gt; It's set to 80% and participation goes to 0 when locally generating data. Perhaps I'm misunderstanding things.</p>
<p>16:36 &lt; jrandom&gt; ah, yes, thats not what the share percentage does</p>
<p>16:36 &lt;+Complication&gt; spinky: it's a maximum limit of what may be shared, subject to bandwidth actually available for sharing</p>
<p>16:37 &lt;+Complication&gt; If local traffic takes up 70%, you've only got 10% left for sharing</p>
<p>16:37 &lt;+Complication&gt; If local traffic is heavy, you'll have 0% left, and the top limit of 80% will never be touched</p>
<p>16:37 &lt; spinky&gt; Ok. I see it says 'up to'...</p>
<p>16:38 &lt;+Complication&gt; And also, there's the 4 KB/s reserve</p>
<p>16:38 &lt; jrandom&gt; ah, its share percentage of what you have available</p>
<p>16:38 &lt; spinky&gt; Maybe another setting for the floor participation bw, under which the router will accept more tunnels?</p>
<p>16:38 &lt; jrandom&gt; if you are using 95% of your bw, it will share up to 80% of the remaining 5%</p>
<p>16:39 &lt;+Complication&gt; Oh, then I've partly misunderstood it too</p>
<p>16:40 &lt; fox&gt; &lt;zorglu1&gt; how i2p measure the amount of bw used by other local applications ?</p>
<p>16:40 &lt; spinky&gt; (Just saying, if you consider cover traffic a good thing maybe having it configurable even under heavy local bw usage is a good thing)</p>
<p>16:40 &lt;+Complication&gt; I thought it was applied against the sustained limit</p>
<p>16:40 &lt; jrandom&gt; zorglu1: it measures i2p's bw usage, and knows i2p's bw limits</p>
<p>16:41 &lt; jrandom&gt; oh, hmm, looking back at the code, int availBps = (int)(((maxKBps*1024)*share) - used);</p>
<p>16:41 &lt; jrandom&gt; so you're right Complication </p>
<p>16:42 &lt; jrandom&gt; spinky: cover traffic is only so useful on a low latency mixnet</p>
<p>16:42 &lt; jrandom&gt; it does add some incentive for higher bw routers, but those w/out bw to spare have little recourse</p>
<p>16:49 &lt; jrandom&gt; anyway, the tunnel congestion issue has been around for a while, but only recently exacerbated by the insane tunnel rejection rates</p>
<p>16:49 &lt; jrandom&gt; hopefully the next rev will clear it up for us</p>
<p>16:49 &lt; jrandom&gt; ok, anyone have anything else on 2) tunnel creation and congestion?</p>
<p>16:50 &lt;@frosk&gt; sounds like it would take some changes to the tunnel-building scheme</p>
<p>16:50 &lt;+Complication&gt; I hope it will help improve things :)</p>
<p>16:51 &lt;+Complication&gt; Oh, by the way...</p>
<p>16:52 &lt; jrandom&gt; well, we've got some cheap fixes, such as reducing the max concurrency, throttling our build attempts when congested, reducing the drop frequency (as opposed to explicit rejection), and adjusting the profiling to incentivize explicit rejections as opposed to drops</p>
<p>16:52 &lt;+Complication&gt; ...did you perchance find anything which could explain the big disparity between raw bandwidth indicators and tunnel payload indicators?</p>
<p>16:52 &lt;+Complication&gt; (e.g. total banwidth 1 GB, tunnel payload summed up 300 MB)</p>
<p>16:52 &lt; jrandom&gt; but its true, those only affect the magnitude</p>
<p>16:52 &lt;+Complication&gt; (since I haven't been around IRC lately, I'm not sure if you've been looking at that one recently)</p>
<p>16:54 &lt; jrandom&gt; havent dug into that much, but remember, tunnel build requests for outbound tunnels aren't tunnel messages (and there are lots of them if only .1% are successful.  and at 4KB each...)</p>
<p>16:54  * Complication isn't certain if it's the indicators, or a real effect</p>
<p>16:55 &lt;+Complication&gt; Oh... outbound build requests... indeed</p>
<p>16:55 &lt; jrandom&gt; the upcoming -1 build adds a slew of stats for monitoring per-message-type packet monitoring</p>
<p>16:55 &lt;+Complication&gt; That could be precisely it</p>
<p>16:55 &lt; jrandom&gt; (also included in those outbound build requests are build participationg requests - forwarding a reply)</p>
<p>16:56 &lt; jrandom&gt; ((so its not just local stuff))</p>
<p>17:00 &lt;+Complication&gt; &gt; Thanks, that explains it a whole lot :)</p>
<p>17:00 &lt;+Complication&gt; &gt; It ain't voodoo then, but quite real traffic, which I just forgot, since it wasn't specifically counted in the places I checked</p>
<p>17:00 &lt;+Complication&gt; It would indeed have to occur, and would indeed cost a lot of bytes</p>
<p>17:00 &lt;+Complication&gt; Especially with low success rates</p>
<p>17:01 &lt; jrandom&gt; aye, though i shouldn't cost as much as it does, since we should have higher success rates than we do :)</p>
<p>17:01 &lt; jrandom&gt; ok, anything else on 2)?</p>
<p>17:02 &lt; jrandom&gt; if not, lets swing on over to 3) Feedspace</p>
<p>17:02 &lt; jrandom&gt; frosk: wanna give us an update?</p>
<p>17:03 &lt; jrandom&gt; (or tell us to fsck off and read the eepsite?  ;)</p>
<p>17:04 &lt;@frosk&gt; well, for those who haven't paid attention to frosk.i2p or feedspace.i2p, feedspace is now basically working (for my own defintion of "basically)</p>
<p>17:04 &lt; jrandom&gt; (w00t)</p>
<p>17:05 &lt;@frosk&gt; there's been some nice additions lately, like infrastructural support for transports other than i2p (tor and non-anonymous tcp/ip comes to mind)</p>
<p>17:06 &lt;@frosk&gt; so in time, we plan to allow syndie (in an upcoming and probably very nice rewrite) to use feedspace as one of its syndication methods</p>
<p>17:06 &lt;@frosk&gt; for now, there aren't any client apps to actually *use* feedspace for anything :) i've been testing with an extremely crude servlet app</p>
<p>17:07 &lt; jrandom&gt; (crude + functional)++</p>
<p>17:07 &lt;@frosk&gt; so there is of course a job opening for a client hacker ;)</p>
<p>17:08 &lt;@frosk&gt; there are still some necessary stuff that feedspace needs before any public testing, but it shouldn't be long now :)</p>
<p>17:08 &lt; jrandom&gt; nice1</p>
<p>17:08 &lt; jrandom&gt; anything we can do to help?</p>
<p>17:08 &lt;@frosk&gt; also i've been working a bit on documentation, which has been lacking</p>
<p>17:09 &lt; spinky&gt; Do you see feedspace being usable for large files?</p>
<p>17:10 &lt;@frosk&gt; 1) client apps using the (still undocumented) xmlrpc api, 2) http://feedspace.i2p/wiki/Tasks, 3) participate in testing when that time comes</p>
<p>17:10 &lt;@frosk&gt; large files support is not a priority for now, but perhaps later</p>
<p>17:10 &lt;@frosk&gt; focus for "1.0" is smaller messages such as blog and discussion entries, and events of any sort</p>
<p>17:11 &lt; jrandom&gt; though feeding .torrent files into an rss/feedspace-enabled bt client wouldn't be a problem</p>
<p>17:11 &lt;@frosk&gt; large files may or may not work :)</p>
<p>17:11 &lt;@frosk&gt; that would be a superneat thing</p>
<p>17:12 &lt; jrandom&gt; feed2snark ;)</p>
<p>17:12 &lt;@frosk&gt; i hope we'll see all sorts of such "adapter" apps :)</p>
<p>17:12 &lt;+Complication&gt; Well, I'm sure people will find ways to move large files using bit... umm, side channels :)</p>
<p>17:15 &lt;@frosk&gt; i feel a bit guilty about the feedspace code using all sorts of java1.5 features. it would probably be hard to compile/use on free java right now, but it will catch up i'm sure :)</p>
<p>17:15 &lt; jrandom&gt; yikes</p>
<p>17:16 &lt; jrandom&gt; well, there are rumors of gcj adopting ecj for 1.5-isms</p>
<p>17:16 &lt; spinky&gt; Complication: Ponies with saddle bags full of hdds?</p>
<p>17:16 &lt;@frosk&gt; yep</p>
<p>17:17 &lt;+Complication&gt; spinky: drones, in my preferred case :P</p>
<p>17:17  * jrandom is still barely moving up to 1.4-isms</p>
<p>17:17 &lt;+Complication&gt; But I guess ponies work too :P</p>
<p>17:17 &lt; jrandom&gt; though 1.6 sure is nice ;)</p>
<p>17:17 &lt;@frosk&gt; to stay gcj-compatible?</p>
<p>17:18 &lt;@frosk&gt; well 1.6 doesn't have a lot of "isms" for most things anyway i think :)</p>
<p>17:18 &lt;+Complication&gt; (or flying hedgehogs airdropping memory cards)</p>
<p>17:18 &lt; jrandom&gt; gcj/classpath/etc, but also for performance (i've found 1.5 a bit heftier than 1.4)</p>
<p>17:19 &lt; jrandom&gt; true, 1.6's improvements are largely vm/bytecode specific</p>
<p>17:19 &lt;@frosk&gt; hm ok</p>
<p>17:20  * jrandom isn't trying to pursuade you not to use 1.5isms.  i'm sure you've got your reasons, and e.g. azureus already requires 1.5</p>
<p>17:21 &lt;@frosk&gt; well there's no going back :) hopefully it won't be too bumpy</p>
<p>17:24 &lt; jrandom&gt; aye, i'm ure it'll work out fine :)</p>
<p>17:25 &lt; jrandom&gt; ok cool, anyone have anything else on 3) feedspace?</p>
<p>17:25  * frosk hugs his generics and java.util.concurrent ;)</p>
<p>17:25 &lt; jrandom&gt; heheh</p>
<p>17:27 &lt; jrandom&gt; ok, if there's nothing else on 3, lets move on over to 4) ???</p>
<p>17:27 &lt; jrandom&gt; anyone have anything else for the meeting?</p>
<p>17:27 &lt;+Complication&gt; A little question which I should have asked under 2)</p>
<p>17:28 &lt;+Complication&gt; Do you know, how do idle participating tunnels typically form?</p>
<p>17:28 &lt;+Complication&gt; Are they mostly a sign of failed tunnel builds, where only the creator really knows it failed?</p>
<p>17:28 &lt;+Complication&gt; Or do they have additional reasons?</p>
<p>17:28 &lt;+Complication&gt; (besides, of course, the obvious - namely an app sitting idle)</p>
<p>17:29 &lt; jrandom&gt; an idle app wouldn't have idle tunnels (they'd be tested)</p>
<p>17:29 &lt; jrandom&gt; idle tunnels are failed for some reason or another</p>
<p>17:29 &lt; jrandom&gt; (either failed to be creted fully, or failed during operation)</p>
<p>17:30 &lt;+Complication&gt; Right, so all tunnels are tested anyway, and tunnel testing should cause traffic... indeed</p>
<p>17:30 &lt;+Complication&gt; That actually brings me to the second part of my question: would it offer any benefit to notice that a tunnel is idle, and scrap it early?</p>
<p>17:31 &lt;+Complication&gt; Are there any precious resources to be saved there?</p>
<p>17:32 &lt; jrandom&gt; none - a tunnel that isn't pushing data isn't using up resources</p>
<p>17:32 &lt; jrandom&gt; (ok, its using up some ram, perhaps 32 bytes)</p>
<p>17:32 &lt;+Complication&gt; Or perhaps, could it help a router to keep a better picture of its load and similar parameters...</p>
<p>17:33 &lt; jrandom&gt; predictions on bw usage bsed on the tunnel history is certainly an open question</p>
<p>17:33 &lt;+Complication&gt; Or would it just be pointless work, and it's best to wait until it expires naturally?</p>
<p>17:33 &lt;+Complication&gt; (like it does now)</p>
<p>17:34 &lt; jrandom&gt; we used to do some predictions, but it didn't give us clear benefits, so we're using a simpler algorithm now</p>
<p>17:34 &lt;+Complication&gt; Aha, so no gain...</p>
<p>17:34 &lt;+Complication&gt; Thanks, that was basically all I wanted to ask about it :)</p>
<p>17:34 &lt; jrandom&gt; np, understandable concern</p>
<p>17:34 &lt; jrandom&gt; ok, anyone have anything else for the meeting?</p>
<p>17:35 &lt;+Complication&gt; Yeah, if one did predictions, the percentage of idling tunnels might tilt estimates</p>
<p>17:35 &lt;+Complication&gt; (if it varied significantly)</p>
<p>17:36 &lt; jrandom&gt; aye, we'd want to keep idle % as part of the estimate</p>
<p>17:36 &lt; jrandom&gt; (we used to - see the RouterThrottleImpl.allowTunnel method)</p>
<p>17:37 &lt;+Complication&gt; Oh, didn't know that :)</p>
<p>17:37 &lt; jrandom&gt; and note the new comment:</p>
<p>17:38 &lt; jrandom&gt;  // ok, ignore any predictions of 'bytesAllocated', since that makes poorly</p>
<p>17:38 &lt; jrandom&gt;  // grounded conclusions about future use (or even the bursty use).  Instead,</p>
<p>17:38 &lt; jrandom&gt;  // simply say "do we have the bw to handle a new request"?</p>
<p>17:39  * Complication is still browsing towards the file, but thanks :)</p>
<p>17:39 &lt; jrandom&gt; w3rd</p>
<p>17:40 &lt; jrandom&gt; ok, if there's nothing else for the meeting...</p>
<p>17:40  * jrandom winds up</p>
<p>17:41  * jrandom *baf*s the meeting closed</p>
</div>
