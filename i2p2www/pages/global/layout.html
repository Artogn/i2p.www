{%- from "global/macros" import change_lang with context -%}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>{% block title_outer %}{% block title %}{% endblock %} - I2P{% endblock %}</title>
    <link rel="canonical" href="{{ canonical() }}" />
    {% if g.exttheme %}<link rel="stylesheet" type="text/css" href="{{ g.exttheme }}" title="External theme" />{% else -%}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/' + g.theme + '.css') }}" title="{{ g.theme }}" />
    {%- endif %}
    <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}" />
    <meta name="robots" content="NOODP" />
    {%- block headextra %}{% endblock %}
  </head>
  <body>
    <div class="hide"><a href="#content" title="Skip navigation" accesskey="2">{{ _('Skip navigation') }}</a></div>
    <div id="topbar">
      <a id="logo" href="{{ site_url() }}"><img src="{{ url_for('static', filename=logo_url()) }}" alt="I2P Logo" title="Invisible Internet Project (I2P)" /></a>
      <div class="title">
        <h1>{{ self.title() }}</h1>
        {% include "global/lang.html" %}
      </div>
    </div>
{%- if g.theme != "danimoth" %}
    <div class="navigation">
      {% include "global/nav.html" %}
    </div>
    <div id="content">
      {% block content_outer %}
      <div class="inner">
        {%- if self.lastupdated() or self.accuratefor() -%}
        <div class="lastupdated">
          This page {% if self.lastupdated() %}was last updated in {% block lastupdated %}{% endblock %}{% endif -%}
        {% if self.lastupdated() and self.accuratefor() %} and {% endif -%}
        {% if self.accuratefor() %}is accurate for router version {% block accuratefor %}{% endblock %}{% endif %}.
        </div>
        {% endif %}
      {% block content %}{% endblock %}
      </div>
      {% endblock %}
    </div>
    <div id="footer">
      {% include "global/footer.html" %}
    </div>
{%- else %}
    <div class="container-fluid">
      <div class="sidebar">
        {%- if not self.content() %}
        <div class="alert-message block-message warning news">
          <h2>{% trans %}News &amp; Updates{% endtrans %}</h2>
            {% include "blog/latest.html" %}
        </div>
        {%- endif %}

        <div class="well">
          {% include "global/nav.html" %}
        </div>
      </div>
      <div class="content{% if not self.content() %} well{% endif %}">
        {%- if self.content() %}
        {{ self.content() }}
        {%- else %}
        {{ self.content_outer() }}
        {%- endif %}
        <footer class="row">
          {% include "global/footer.html" %}
        </footer>
      </div>
    </div>
{%- endif %}
  </body>
</html>
